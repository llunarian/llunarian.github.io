---

layout: single
title: 6. 분산 시스템 모니터링
category: Site Reliability Engineering
published: false

---

>📌 이 시리즈는 ⟪사이트 신뢰성 엔지니어링⟫(벳시 베이어, 크리스 존스, 제니퍼 펫오프, 니얼 리처드 머피 지음, 제이펍, ISBN 979-11-88621-08-8) 의 내용을 개인적으로 학습하고 정리하기 위해 쓰여졌습니다. 따라서 해당 글을 인용 및 재배포하는 것에 대한 주의를 부탁드립니다.🚨

>SRE에 대해 더 알고싶으시다면 [여기](https://sre.google/) 를 참고하세요!

<br/>

이 장에서는 구글 SRE 팀의 모니터링 시스템 구축을 위한 기본적인 원리와 베스트 프랙티스를 살펴보고, 사람이 반드시 필요한 이슈는 어떤 것인지, 굳이 필요하지 이슈들은 어떻게 처리하는지에 대해 다룬다.

# 정의
### 모니터링
- 쿼리의 수와 종류, 에러의 수와 종류, 처리 시간 및 서버의 활동 시간 등 세스템에 대한 정량적 실시간 데이터를 모으고 처리하고 집계해서 보여주는 것을 말한다.
### 화이트박스(white-box) 모니터링
- 로그나 자바 가상 머신(JVM)의 프로파일링 인터페이스(profiling interface)같은 인터페이스 혹은 내부의 통계 지표를 제공하는 HTTP 핸들러 등을 이용해서 얻은 시스템의 내부 지표들을 토대로 하는 모니터링을 의미한다. 쉽게 말해 개발자들이 내부를 확인할 수 있는 모니터링이다. 쿼리 수행이나 HTTP 요청 응답에 대한 자세한 수치를 제공한다. APM도 화이트박스 모니터링에 포함된다.
### 블랙박스(black-box) 모니터링
- 사용자가 보게 되는 확인 가능한 동작들을 외부에서 테스트하는 과정을 말한다. 쉽게 말해 시스템 모니터링을 말하는데, CPU, 메모리, 대역폭 등 대부분의 리소스 모니터링이 여기에 포함된다.
- 아래 그림은 블랙박스와 화이트박스 모니터링의 차이를 이해하기 쉽게 보여준다. (출처: https://www.devopsschool.com/blog/white-box-monitoring-and-black-box-monitoring-explained/)
![](/assets/images/ben_treynor_sloss.png){: width="400"}{: .align-center}
<figcaption>구글 기술 운영 감독 부사장이자 SRE라는 용어를 만든 Ben Treynor Sloss. 구글링해보면 슈퍼카 수집이 취미이신듯... ㄷㄷ</figcaption>{: .text-center}
### 대시보드(dashboard)
### 알림(alert)
### 근본 원인
### 노드와 머신
### 푸시(push)

<br/>

# 왜 모니터링해야 하는가?
시스템을 모니터링해야 하는 이유는 아래와 같다.
### 장기적인 트렌드 분석
### 시간순 혹은 실험 그룹에 대한 비교
### 알림
### 대시보드
### 임시적인 회고 분석의 수행(예를 들면 디버깅 등)

<br/>

# 모니터링에 대한 적절한 기대치 설정하기

<br/>

# 증상과 원인

<br/>

# 블랙박스와 화이트박스

<br/>

# 네 가지 결정적인 지표
### 지연응답
### 트래픽
### 에러
### 서비스 포화 상태

<br/>

# 마지막 요청(혹은 실행과 성능)에 대한 고려

<br/>

# 적당한 측정 방법 선택하기

<br/>

# 더욱 단순하게가 아니라 최대한 단순하게

<br/>

# 지금까지 살펴본 원리들을 결합하기

<br/>

# 장기적 모니터링
### 빅테이블 SRE:과도한 알림
### 지메일:사람이 예측 및 스크립팅할 수 있는 응답
### 한 걸음 더 나아가기

<br/>

# 결론
